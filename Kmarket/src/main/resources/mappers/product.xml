<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.kmarket.dao.ProductDao">
	<insert id="insertProduct"></insert>
	<select id="selectProduct"></select>
	
	<select id="selectProducts" resultType="kr.co.kmarket.vo.ProductVo">
		SELECT *, FLOOR(price * (1 - discount/100)) AS salePrice
		FROM `km_product`
		WHERE `cate1`=#{cate1} AND `cate2`=#{cate2}
		<if test="order == 1">ORDER BY `sold` DESC;</if>
		<if test="order == 2">ORDER BY `salePrice` ASC;</if>
		<if test="order == 3">ORDER BY `price` DESC;</if>
		<if test="order == 4">ORDER BY `score` DESC;</if>
		<if test="order == 5">ORDER BY `review` DESC;</if>
		<if test="order == 6">ORDER BY `rdate` DESC;</if>
	</select>
	
	<select id="selectCategoryTitle" resultType="kr.co.kmarket.vo.CategoriesVo">
		SELECT b.cate1, b.cate2, a.title AS tit1, b.title AS tit2
		FROM `km_product_cate1` AS a
		JOIN `km_product_cate2` AS b
		ON a.cate1 = b.cate1
		WHERE b.cate1=#{cate1} AND b.cate2=#{cate2};
	</select>
	
	<update id="updateProduct"></update>
	<delete id="deleteProduct"></delete>
  
</mapper>
